<!-- HEADER NAVBAR -->
<header class="aw-navbar">
  <!-- BotÃ³n hamburguesa (solo mobile) -->
  <button class="icon-btn menu-btn" (click)="toggleSidebar()" aria-label="Open menu">
    <img class="icon" src="assets/icons/icon_menu.svg" alt="menu" />
  </button>

  <!-- Logo -->
  <a routerLink="/" class="brand" aria-label="Home">
    <img class="aw-logo" src="assets/logos/andeswarmi-logo.svg" alt="AndesWarmi" />
  </a>

  <!-- CategorÃ­as solo desktop -->
  <nav class="nav-cats">
    <button class="chip active">Todos</button>
    <button class="chip">Mujeres</button>
    <button class="chip">Hombres</button>
    <button class="chip">Ponchos</button>
    <button class="chip">Cardigans</button>
    <button class="chip">Otros</button>
  </nav>

  <!-- Acciones -->
  <div class="actions">
    <!-- Visitante -->
    <a *ngIf="!auth.isLoggedIn" routerLink="/login" class="signin">Sign in</a>

    <!-- Usuario logueado con dropdown -->
    <ng-container *ngIf="auth.isLoggedIn">
      <div class="user-menu" (click)="toggleUserMenu()" [class.open]="userMenuOpen">
        <span class="user-email">{{ auth.currentUser?.email }}</span>
        <i class="fa-solid fa-chevron-down"></i>

        <!-- Dropdown -->
        <div class="user-dropdown" *ngIf="userMenuOpen">
          <a routerLink="/account" class="dropdown-item">My account</a>
          <a routerLink="/orders" class="dropdown-item">My orders</a>
          <button (click)="logout()" class="dropdown-item">Sign out</button>
        </div>
      </div>
    </ng-container>

    <!-- Carrito -->
    <button class="icon-btn cart-button" aria-label="Cart" (click)="openCart()">
      <img class="icon" src="assets/icons/icon_shopping_cart.svg" alt="cart" />
      <span class="cart-badge" *ngIf="cartCount > 0">{{ cartCount }}</span>
    </button>
  </div>
</header>

<!-- SIDEBAR (solo mobile) -->
<div class="sidebar-backdrop" *ngIf="sidebarOpen" (click)="toggleSidebar()"></div>

<aside class="sidebar" [class.open]="sidebarOpen">
  <div class="sidebar-header">
    <h6 style="color: #523b2b; font-weight: bold">CATEGORIAS</h6>
    <button class="close-btn" (click)="toggleSidebar()">âœ•</button>
  </div>

  <nav class="sidebar-menu">
    <!-- âœ… CategorÃ­as SIEMPRE visibles -->
    <a class="sidebar-link" href="#">Todos</a>
    <a class="sidebar-link" href="#">Mujeres</a>
    <a class="sidebar-link" href="#">Hombres</a>
    <a class="sidebar-link" href="#">Ponchos</a>
    <a class="sidebar-link" href="#">Cardigans</a>
    <a class="sidebar-link" href="#">Otros</a>

    <hr />

    <!-- ðŸ”¹ Opciones de usuario: condicional -->
    <!-- Visitante -->
    <a *ngIf="!auth.isLoggedIn" routerLink="/login" class="sidebar-link" (click)="toggleSidebar()">
      Log in
    </a>

    <!-- Usuario autenticado -->
    <ng-container *ngIf="auth.isLoggedIn">
      <a routerLink="/orders" class="sidebar-link" (click)="toggleSidebar()">My orders</a>
      <a routerLink="/account" class="sidebar-link" (click)="toggleSidebar()">My account</a>
      <p class="user-email">{{ auth.currentUser?.email }}</p>
      <button
        class="sidebar-link"
        style="background: none; border: 0; padding: 0; text-align: left"
        (click)="logout()"
      >
        Sign out
      </button>
    </ng-container>
  </nav>
</aside>
