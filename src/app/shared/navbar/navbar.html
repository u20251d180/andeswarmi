<header class="aw-navbar">
  <!-- BotÃ³n MenÃº -->
  <button class="icon-btn menu-btn" (click)="toggleSidebar()" aria-label="Open menu">
    <img class="icon" src="assets/icons/icon_menu.svg" alt="menu" />
  </button>

  <!-- Logo -->
  <a routerLink="/" class="brand" aria-label="Home">
    <div class="brand-inner">
      <img class="aw-logo" src="assets/logos/andeswarmi-logo.svg" alt="AndesWarmi" />
    </div>
  </a>

  <!-- CategorÃ­as Desktop -->
  <nav class="nav-cats">
    <button class="chip active">Todos</button>
    <button class="chip">Mujeres</button>
    <button class="chip">Hombres</button>
    <button class="chip">Ponchos</button>
    <button class="chip">Cardigans</button>
    <button class="chip">Otros</button>
  </nav>

  <!-- Acciones -->
  <div class="actions">
    <!-- Visitante -->
    <a *ngIf="!auth.isLoggedIn" routerLink="/login" class="signin">Sign in</a>

    <!-- Usuario logueado -->
    <ng-container *ngIf="auth.isLoggedIn">
      <div class="user-menu" (click)="toggleUserMenu()" [class.open]="userMenuOpen">
        <span class="user-email">{{ auth.currentUser?.email }}</span>
        <i class="fa-solid fa-chevron-down"></i>

        <div class="user-dropdown" *ngIf="userMenuOpen">
          <a routerLink="/account" class="dropdown-item">My account</a>
          <a routerLink="/orders" class="dropdown-item">My orders</a>
          <a *ngIf="auth.isAdmin" routerLink="/admin" class="dropdown-item">Admin Panel</a>
          <button (click)="logout()" class="dropdown-item">Sign out</button>
        </div>
      </div>
    </ng-container>

    <!-- Carrito -->
    <button class="icon-btn" (click)="openCart()" aria-label="Abrir carrito">
      <img class="icon" src="assets/icons/icon_shopping_cart.svg" alt="cart" />
      <span class="cart-badge" *ngIf="cartCount > 0">{{ cartCount }}</span>
    </button>
  </div>
</header>

<!-- ðŸ”¹ Fondo oscuro -->
<div class="sidebar-backdrop" *ngIf="sidebarOpen" (click)="toggleSidebar()"></div>

<!-- ðŸ”¹ Sidebar (menÃº lateral) -->
<aside class="sidebar" [class.open]="sidebarOpen">
  <div class="sidebar-header">
    <h3>CATEGORIES</h3>
    <button class="close-btn" (click)="toggleSidebar()">âœ•</button>
  </div>

  <nav class="sidebar-menu">
    <a class="sidebar-link" (click)="toggleSidebar()">All</a>
    <a class="sidebar-link" (click)="toggleSidebar()">Women</a>
    <a class="sidebar-link" (click)="toggleSidebar()">Men</a>
    <a class="sidebar-link" (click)="toggleSidebar()">Ponchos</a>
    <a class="sidebar-link" (click)="toggleSidebar()">Cardigans</a>
    <a class="sidebar-link" (click)="toggleSidebar()">Others</a>
  </nav>

  <hr class="sidebar-divider" />

  <!-- ðŸ”¹ Opciones segÃºn sesiÃ³n -->
  <div *ngIf="auth.isLoggedIn; else guestLinks" class="sidebar-user">
    <a class="sidebar-link" routerLink="/orders" (click)="toggleSidebar()">My orders</a>
    <a class="sidebar-link" routerLink="/account" (click)="toggleSidebar()">My account</a>

    <div class="sidebar-email">{{ auth.currentUser?.email }}</div>
    <button class="logout-btn" (click)="logout()">Sign out</button>
  </div>

  <!-- ðŸ”¹ Invitado -->
  <ng-template #guestLinks>
    <div class="sidebar-guest">
      <a class="sidebar-link" routerLink="/login" (click)="toggleSidebar()">Log in</a>
    </div>
  </ng-template>
</aside>
