<main class="container">
  <!-- Topbar: Search + Order -->
  <div class="topbar">
    <div class="search-wrap">
      <img class="lupa" src="assets/icons/lupa.svg" alt="lupa" />
      <input
        type="search"
        placeholder="Search product"
        aria-label="Search product"
        [value]="searchTerm"
        (input)="onSearch($any($event.target).value)"
      />
    </div>

    <div class="order-wrap">
      <span class="muted">Order:</span>
      <select
        class="order-select"
        [value]="sortOption"
        (change)="onSortChange($any($event.target).value)"
      >
        <option value="recent">Más recientes</option>
        <option value="bestsellers">Más vendidos</option>
        <option value="price-asc">Menor precio</option>
        <option value="price-desc">Mayor precio / Exclusivos</option>
      </select>
    </div>
  </div>
  <div class="container" style="margin: 10px 16px; align-items: center; display: flex; gap: 12px">
    <div class="results-muted">{{ filteredProducts.length }} resultados</div>
  </div>

  <!-- Productos -->
  <section class="cards-container">
    <article
      class="product-card"
      *ngFor="let product of filteredProducts"
      (click)="openModal(product, $event)"
    >
      <img [src]="product.image" [alt]="product.name" />

      <div class="product-info">
        <div class="meta">
          <p class="price">$ {{ product.price.toFixed(2) }}</p>
          <p class="name">{{ product.name }}</p>
        </div>
        <button class="cart-btn" aria-label="Add to cart" (click)="$event.stopPropagation()">
          <img class="icon-40" src="assets/icons/bt_add_to_cart.svg" alt="Add to cart" />
        </button>
      </div>
    </article>
  </section>
</main>

<!-- Modal de producto -->
<app-product-modal [product]="selectedProduct" (close)="closeModal()"></app-product-modal>
